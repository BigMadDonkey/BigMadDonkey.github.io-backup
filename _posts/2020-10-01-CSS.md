---
title: CSS学习[施工中]
author: MadDonkey
categories: [note, CSS]
layout: post
---
这是CSS的学习笔记。本笔记分为两部分内容：第一部分介绍CSS的用法，第二部分介绍CSS的设计理念和使用技巧。

<br />

# 1. CSS用法

## 什么是CSS

Cascading Style Sheets，层叠样式表。Style定义了HTML元素显示的格式，通常存储在样式表中，外部样式表存储在**CSS文件**中。将样式Style抽离出HTML文件的外部，可以将内容与表现分离开来。这种思路大概也类似于MVC框架中把业务逻辑和视图分离的思想吧。多个样式表可以层叠为一个，这就是CSS的Cascading的来历。

>也有说法说，所谓”层叠“指的是多个CSS声明可以作用于同一标签，会按照优先级表现其属性。

## CSS基础语法

CSS的语法规则由两个部分组成：选择器，以及一条或多条声明。前者指明要对哪个HTML元素调整样式，后者由属性和值组成。属性是要调整的样式属性，值是对应属性的取值。每个属性-值对之后要加上分号。CSS声明用花括号`{}`括起来。

```css
selector
{
	property1:value1;
	property2:value2;
}
```

要添加注释，使用`/*`和`*/`将注释内容包含起来。注意，CSS不支持`//`注释。别跟C语言搞混了！

注意：有的属性的值存在单位，比如font-size属性。这样的属性的值其数字和单位之间**不得有空格**。

```CSS
h3
{
font-size: 25px;/* Yes */
font-size: 25 px/* No */
}
```

## 选择器的用法

首先介绍几类**基本**的选择器。

#### 元素选择器

也叫标签选择器。该选择器的效果是对特定种类的元素应用样式。元素选择器的格式很简单，即需要应用于其上的元素名称。

使用例：

```css
div {
    text-align: left;
}
```

上述声明将作用于所有div元素。

#### id选择器

选择具有特定id的元素，调整其样式。id选择器的格式是"#"加上对应该元素的id。

使用例：

```css
#ass {
	text-align: center;
    font-size: 10px;
}
```

上述声明将调整id为ass的元素的属性。

#### 类选择器

选择所有带有特定class属性的元素，调整其样式。类选择器的格式是"."加上类名。

使用例：

```css
.silly_class {
    color: red;
}
```

上述声明将作用于所有带`class = "silly_class"`属性的元素。

#### 通用选择器

使用`*`来匹配任何标签，调整所有标签的样式。通用选择器的效率很低（页面上的标签越多，越低），而且有些IE版本不支持。

使用例：

```css
*{
    margin-left:0px;
    margin-top:0px;
}
```

将作用于所有标签。

然后介绍几类高级的选择器：

#### 后代选择器

格式为`A B`。这样的选择器，表示所有属于A所指元素的子节点的B元素。注意，这里不要求A和B紧挨着。

使用例：

```css
.my_div span{
	color: red;
}
```

将作用于所有`class = ".my_div"`的元素内的span标签。

注：后代选择器可以组合使用，例如 A B C D表示位于A中的B中的C中的D标签。

##### 拓展：子元素选择器

如果想选择那些紧挨于A之内的B（换言之，A是B的父节点），可以写成`A>B`。这种选择器称为子元素选择器。使用子元素选择器时，可以在`>`两边引入空白符，不会造成歧义。

##### 拓展：相邻兄弟选择器

如果想选择紧挨在A之后的兄弟标签B（它们拥有相同的父元素），则可写成`A+B`。这将选择出紧挨在A之后出现的B，且A、B具有共同的父元素。如果A、B不相邻，即使是具有相同父标签的元素，也不会作用于其上。类似于子元素选择器，可以在`+`两边引入空白符而不造成歧义。

###### 再拓展：兄弟选择器

相邻兄弟选择器的要求是很严格的，要求必须是B是A的直接后继兄弟才能匹配。使用形如`A~B`的格式会选择跟在A后面匹配的所有兄弟元素。

#### 交集选择器

格式为`AB`。注意这里是不带空格的，带空格的话要考虑是不是识别成后代选择器。

交集选择器的效果是选择那些`A`和`B`都满足的标签。交集选择器可以连续交。

使用例：

```css
div.my_div{
    color: red;
}
```

将作用于所有`class = "my_div"`的div标签。类似地，也可以使用`A#id`的形式，但是由于id具有唯一性，已经足够标识元素了，所以往往没必要这么做。交集选择器更多的用法还是组合标签选择器和类选择器。

#### 并集选择器

格式为`A,B`。并集选择器可以连续并使用。并集选择器的效果想必不用说你也知道了，作用于任何满足其中之一的元素。

使用例：

```css
h2,div,.my_span{
    color: grey;
}
```

上述声明将作用于所有h2标签、div标签和`class="my_span"`的标签。

#### 属性选择器

格式为`A[attr]`。属性选择器在CSS2引入，效果是对具有属性attr的那些A的标签，应用其样式。也可设置A为空，这样讲对任意的具有attr属性的html元素应用样式。

使用例：

```css
.cls[title]{
	color:red;
}
```

上述声明将作用于那些`class = "cls"`且具有title属性的标签。可以将多个属性组合使用，表示选择那些同时具有多个属性的标签。格式为`A[attr1][attr2][attr3]`。

##### 拓展：属性筛选选择器

要想进一步筛选具有特定属性，且属性为特定值的元素，可以使用此类选择器，格式为`A[attr="value"]`。这样只会匹配具有attr属性且属性值为value的元素A。

要想比较灵活地根据属性值筛选元素，就要再属性值附近使用正则表达式。以下介绍了几种属性选择器的用法：

- `[attr~="value"]`:这种格式可以筛选出属性值包含value字段的那些元素。注意，这里的包含指的是属性值中**用空格分割**的数个单词，而其中一个和value一致。而不是简单地正则匹配。
- `[attr*="value"]`:这种格式正是需要与上一个格式精确区别开的：只要属性值包含value字段（或者说存在子串与value一致），即可匹配。
- `[attr|=value]`:

#### 伪类选择器

伪类选择器较为复杂。伪类选择器为元素定义了状态，可以使得元素在满足特定状态时才应用样式。”伪类“指的是CSS为html元素内置的一些特性，可以修饰html元素的状态。

伪类选择器对浏览器有较高的要求。如果对页面的兼容性有要求，就要考虑使用其他选择器了！

##### 动态伪类选择器

格式为`A:<伪类>`。其中，伪类link、visited**只适用于锚点**标签`<a>`。link表示元素尚未被访问，visited表示元素已被访问。

伪类active、hover和focus的用途更为广泛。active表示匹配的元素被激活时的状态，例如点击锚点（按住但未松开）；hover表示当鼠标指针悬停在匹配的元素上时的状态；focus表示光标聚焦于匹配的标签时的状态（例如聚焦于输入框）。

需要注意这几个伪类选择器存在优先级顺序。要防止某些标签被完全覆盖，需要按照如下顺序在css文件中撰写规则：

1. link
2. visited
3. hover
4. active

##### UI元素状态伪类选择器

这一类选择器可以修饰UI元素被选中、被激活的状态。格式同上，伪类checked用来匹配选中的单选按钮/复选按钮；伪类enabled用来匹配处于启用状态的元素（主要用于表单form元素），disabled类似，只是匹配处于禁用状态的元素。

##### 结构伪类选择器



##### 否定伪类选择器

格式为`A:not(B)`，效果是匹配那些不满足B的A中元素。可以理解为集合的差运算。

使用例：

```css
input:not([type="submit"]){
    border:2px solid red;
}
```

上述规则将作用于所有type不为submit的input元素。

#### 伪元素

与伪类类似，伪元素的效果是对被选择元素的某**特定部分**调整样式。格式为`A::pseudo-element`。

以下列出常用的伪元素：

- `::first-line`：可用于块级元素，为其第一行应用样式。

>按照规范，使用伪类时，使用一个冒号(:)，而使用伪元素时使用双冒号(::)，以区分二者。然而由于早期W3C规范（CSS 2.0）未对此作特别区分，目前大多数浏览器同时支持单冒号和双冒号来表示伪元素。不过，既然我记在这里，那当然还是想告诉读者：按照规范来比较好。
>
>除非项目强烈要求兼容老版本浏览器！

## 样式表的使用

将Style应用于html文件的方法有三种：

- 外部样式表

  在HTML页面的`<head>`标签中增加一个`<link>`标签链接到样式表文件。如果某个样式要应用于多个页面，使用这个方法非常合适。只需要修改一个CSS文件，就可以同时将样式的变化应用于多个页面。上述的引入方式称为链接式，也可以写成`\<style type="text/css">@import url("css文件路径");</style>`，这种方式称为导入式。

- 内部样式表

  在`<head>`标签中的`<style>`标签里写css的内容。

- 行内/内联样式表

  在标签内部增加style属性，其值为css语法的属性声明。这样的样式只会作用于该标签。

内联样式总是会覆盖外部样式表的任何样式，具有最高优先级！

## 属性继承和优先级计算

优先级，或者按照官方的说法，特殊性(specificity)，决定当样式发生冲突时的选择策略。默认情况下，html元素会从其祖先元素处继承某些样式/CSS规则，然而直接作用于元素的CSS规则会覆盖掉已经继承的规则。

>有的样式是不会被后代默认继承的，比如width、margins、padding、borders等。



还可以在CSS规则中为样式传入一个通用属性值。通用属性值有：

- inherit: 指定该属性与父元素一致，这也是大多数属性在不加显式的样式规则时的状态。
- initial: 设置属性为**浏览器默认样式**，如果浏览器默认样式中未设置其样式，且该属性默认是继承父标签的（或者说，**自然继承的**），则相当于设置为inherit。
- unset: 将属性重置为自然值。如果属性是自然继承的，则相当于inherit，否则相当于initial。
- revert: （较少浏览器支持）

如果某个CSS规则存在语法错误，则该CSS规则会被彻底忽略。

一个元素可能有多个匹配的样式。这时，具体应用哪一个样式，就要考虑他们的不同优先级。优先级是通过计算匹配的选择器中的每种选择器类型的权重来决定。如果多个声明具有相同优先级，**最后的声明**将会应用到元素上，否则就选择优先级较高的一个。

> 注意这里讨论的"覆盖"仅针对冲突的属性。如果有些属性没有冲突，则该规则的关于此属性的约束仍有效。

一般来说，优先级按照如下顺序递增：

1. 标签选择器
2. 类选择器
3. ID选择器

MDN给出的优先级的更精确的计算方式如下：

首先明确一点，**一个选择器的优先级**可以视为四个部分相加，以下将优先级记为一个四元组，其中从左到右权重由高到低，简记为千、百、十、个位（尽管实际上并不是真像十进制那样可以进位！）。如果高位较大，则该选择器优先级较高，高位相同才向下继续比较，类似于字符串比较。

优先级计算规则：

- 如果某个规则是内联的（也就是说，通过html标签的style属性声明），则千位+1。实际上千位也没有其他增加的方法。
- 选择器中包含ID选择器，则百位+1。
- 选择器中包含类选择器/属性选择器/伪类选择器，则十位+1。
- 选择器中包含元素/伪元素选择器，则个位+1。

注：通配符`*`、关系运算符`+, >, ~, ||`和**否定伪类**`:not()`对优先级**无影响**，但在`:not()`内声明的选择器会影响优先级。



除了一个例外：`!important`。



# 2. 网页设计技巧

本部分聚焦于在掌握了基本语法的基础上，学习设计网页样式的技巧。

## 一切皆盒子

设计CSS布局时，可以将html元素视为一个个嵌套的盒子。实际上，CSS布局就是基于盒子模型的，每个**占据页面空间的块**都具有如下属性：

- padding: 内边距，指盒子框与内容间的距离。
- border: 边框，紧接着将内边距和外边距分隔的线，也是盒子模型的框边界。
- margin: 外边距，盒子框与其他元素的距离。

## 关于文件命名的格式

许多计算机、服务器对大小写敏感的，这一点无须多言了。由于有些系统会将包含空格的文件名视为两个文件，有的服务器会将文件名中的空格替换为`%20`，故最好文件名中不要带空格。

要分隔单词，习惯于编程语言的人可能会使用下划线，但在网页开发中，为文件命名时，这不是一个好的习惯。搜索引擎（比如Google）将连字符当作单词的分隔符，但下划线并不是。

总而言之，为文件/文件夹命名时，避免使用空格和下划线，使用连字符`-`来分割单词，并注意大小写敏感。

## 定义规则的技巧

为了最大程度避免CSS的重复，可以活用不同优先级规则的继承关系。例如，如果想要为不同的h2标题定义CSS规则，可以先定义一个标签选择器，其中定义一些共性的属性，这个规则的优先级较低；然后为每个需要特化的标题增加class属性，在CSS文件中，使用类选择器来特化不同类标题的样式（注意这时只要把从标签选择器继承而来的规则进行修改即可）。

这不就类似于面向对象编程语言对类和继承的概念抽象吗？

